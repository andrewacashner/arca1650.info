<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Scribo.MEI</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Scribo.MEI.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">arca-0.1.0.0: A digital implementation of Athanasius Kircher's device for automatic music composition, the Arca musarithmica of 1650</p></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>(c) 2022 Andrew A. Cashner</td></tr><tr><th>Stability</th><td>Experimental</td></tr><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Scribo.MEI</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Write XML </a><ul><li><a href="#g:2">Utilities</a></li><li><a href="#g:3">Create elements and attributes, and elements with attributes</a></li></ul></li><li><a href="#g:4">Serialize our data structures to MEI</a><ul><li><a href="#g:5"><code>Note</code> becomes <code>note</code> (pitch with syllable, or rest)</a><ul><li><a href="#g:6">Conversions for <code>Note</code> members</a></li><li><a href="#g:7">Conversions for lyrics</a></li></ul></li></ul></li><li><a href="#g:8">Write large groups to MEI</a></li><li><a href="#g:9">Write a whole score to MEI</a><ul><li><a href="#g:10">The full MEI document</a><ul><li><a href="#g:11">MEI Barlines</a></li><li><a href="#g:12">String constants for XML document</a></li><li><a href="#g:13">The template</a></li></ul></li></ul></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>This module is our implementation of Kircher's <em>palimpsest phonotacticum</em>, his
system for writing out the music created using the ark.  Certain elements that
Kircher used notation to calculate (like determining vocal ranges by clef
combinations and the size of the staff) we actually do in the <code>Cogito</code> module.
This module is purely focused on output of complete music information to a
music-notation language.</p><p>This module outputs in the XML format of the Music Encoding Initiative (MEI).</p><p>This means that the whole arca program is transforming an input XML document
with the text and parameters into and output XML document with the text
matched to music.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:enbrace">enbrace</a> :: <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></li><li class="src short"><a href="#v:xmltagOpen">xmltagOpen</a> :: <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></li><li class="src short"><a href="#v:xmltagClose">xmltagClose</a> :: <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></li><li class="src short"><a href="#v:xmlWrap">xmlWrap</a> :: <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> -&gt; [<a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a>] -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></li><li class="src short"><a href="#v:xmlWrapBasic">xmlWrapBasic</a> :: <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> -&gt; [<a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a>] -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></li><li class="src short"><a href="#v:element">element</a> :: <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> -&gt; [<a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a>] -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></li><li class="src short"><a href="#v:attr">attr</a> :: <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></li><li class="src short"><a href="#v:elementAttr">elementAttr</a> :: <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> -&gt; [<a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a>] -&gt; [<a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a>] -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></li><li class="src short"><a href="#v:note2mei">note2mei</a> :: <a href="Cogito-Musarithmetic.html#t:Note" title="Cogito.Musarithmetic">Note</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></li><li class="src short"><a href="#v:meiPname">meiPname</a> :: <a href="Aedifico.html#t:Pitch" title="Aedifico">Pitch</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></li><li class="src short"><a href="#v:meiOct">meiOct</a> :: <a href="Aedifico.html#t:Pitch" title="Aedifico">Pitch</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></li><li class="src short"><a href="#v:meiDur">meiDur</a> :: <a href="Aedifico.html#t:Pitch" title="Aedifico">Pitch</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></li><li class="src short"><a href="#v:meiAccid">meiAccid</a> :: <a href="Aedifico.html#t:Pitch" title="Aedifico">Pitch</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></li><li class="src short"><a href="#v:meiSyllable">meiSyllable</a> :: <a href="Cogito-Musarithmetic.html#t:Syllable" title="Cogito.Musarithmetic">Syllable</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:ListPosition">ListPosition</a><ul class="subs"><li>= <a href="#v:ListHead">ListHead</a></li><li>| <a href="#v:ListBody">ListBody</a></li><li>| <a href="#v:ListEnd">ListEnd</a></li><li>| <a href="#v:ListOnly">ListOnly</a></li></ul></li><li class="src short"><a href="#v:positionMap">positionMap</a> :: ((<a href="Scribo-MEI.html#t:ListPosition" title="Scribo.MEI">ListPosition</a>, a1) -&gt; [a2]) -&gt; [a1] -&gt; [a2]</li><li class="src short"><a href="#v:markedEnds">markedEnds</a> :: [a] -&gt; [(<a href="Scribo-MEI.html#t:ListPosition" title="Scribo.MEI">ListPosition</a>, a)]</li><li class="src short"><a href="#v:phrase2mei">phrase2mei</a> :: (<a href="Scribo-MEI.html#t:ListPosition" title="Scribo.MEI">ListPosition</a>, <a href="Cogito-Musarithmetic.html#t:MusicPhrase" title="Cogito.Musarithmetic">MusicPhrase</a>) -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></li><li class="src short"><a href="#v:sentence2mei">sentence2mei</a> :: (<a href="Scribo-MEI.html#t:ListPosition" title="Scribo.MEI">ListPosition</a>, <a href="Cogito-Musarithmetic.html#t:MusicSentence" title="Cogito.Musarithmetic">MusicSentence</a>) -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></li><li class="src short"><a href="#v:section2mei">section2mei</a> :: <a href="Aedifico.html#t:Arca" title="Aedifico">Arca</a> -&gt; (<a href="Scribo-MEI.html#t:ListPosition" title="Scribo.MEI">ListPosition</a>, <a href="Cogito-Musarithmetic.html#t:MusicSection" title="Cogito.Musarithmetic">MusicSection</a>) -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></li><li class="src short"><a href="#v:chorus2mei">chorus2mei</a> :: <a href="Aedifico.html#t:Arca" title="Aedifico">Arca</a> -&gt; (<a href="Scribo-MEI.html#t:ListPosition" title="Scribo.MEI">ListPosition</a>, <a href="Cogito-Musarithmetic.html#t:MusicChorus" title="Cogito.Musarithmetic">MusicChorus</a>) -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></li><li class="src short"><a href="#v:meiKey">meiKey</a> :: <a href="Aedifico.html#t:Tone" title="Aedifico">Tone</a> -&gt; <a href="Aedifico.html#t:ToneSystem" title="Aedifico">ToneSystem</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></li><li class="src short"><a href="#v:meiKeyAttr">meiKeyAttr</a> :: <a href="Aedifico.html#t:Tone" title="Aedifico">Tone</a> -&gt; <a href="Aedifico.html#t:ToneSystem" title="Aedifico">ToneSystem</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></li><li class="src short"><a href="#v:meiKeySigString">meiKeySigString</a> :: <a href="Aedifico.html#t:Tone" title="Aedifico">Tone</a> -&gt; <a href="Aedifico.html#t:ToneSystem" title="Aedifico">ToneSystem</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></li><li class="src short"><a href="#v:meiMeter">meiMeter</a> :: <a href="Aedifico.html#t:MusicMeter" title="Aedifico">MusicMeter</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></li><li class="src short"><a href="#v:meiMeterAttr">meiMeterAttr</a> :: <a href="Aedifico.html#t:MusicMeter" title="Aedifico">MusicMeter</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></li><li class="src short"><a href="#v:meiMeterModern">meiMeterModern</a> :: <a href="Aedifico.html#t:MusicMeter" title="Aedifico">MusicMeter</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></li><li class="src short"><a href="#v:meiMeterMensural">meiMeterMensural</a> :: <a href="Aedifico.html#t:MusicMeter" title="Aedifico">MusicMeter</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></li><li class="src short"><a href="#v:meiMeterMensuralAttr">meiMeterMensuralAttr</a> :: <a href="Aedifico.html#t:MusicMeter" title="Aedifico">MusicMeter</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></li><li class="src short"><a href="#v:meiMidiTempo">meiMidiTempo</a> :: <a href="Aedifico.html#t:MusicMeter" title="Aedifico">MusicMeter</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></li><li class="src short"><a href="#v:meiMidiBPM">meiMidiBPM</a> :: <a href="Aedifico.html#t:MusicMeter" title="Aedifico">MusicMeter</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></li><li class="src short"><a href="#v:chorus2list">chorus2list</a> :: <a href="Cogito-Musarithmetic.html#t:MusicChorus" title="Cogito.Musarithmetic">MusicChorus</a> -&gt; [<a href="Cogito-Musarithmetic.html#t:MusicSection" title="Cogito.Musarithmetic">MusicSection</a>]</li><li class="src short"><a href="#v:score2mei">score2mei</a> :: <a href="Aedifico.html#t:Arca" title="Aedifico">Arca</a> -&gt; <a href="Lectio.html#t:ArkMetadata" title="Lectio">ArkMetadata</a> -&gt; <a href="Cogito-Musarithmetic.html#t:MusicScore" title="Cogito.Musarithmetic">MusicScore</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></li><li class="src short"><a href="#v:meiDoubleBar">meiDoubleBar</a> :: <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></li><li class="src short"><a href="#v:meiFinalBar">meiFinalBar</a> :: <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></li><li class="src short"><a href="#v:meiBarline">meiBarline</a> :: <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></li><li class="src short"><a href="#v:_xmlHeader">_xmlHeader</a> :: [<a href="../base-4.12.0.0/Data-Char.html#t:Char" title="Data.Char">Char</a>]</li><li class="src short"><a href="#v:_meiVersion">_meiVersion</a> :: [<a href="../base-4.12.0.0/Data-Char.html#t:Char" title="Data.Char">Char</a>]</li><li class="src short"><a href="#v:_whoami">_whoami</a> :: [<a href="../base-4.12.0.0/Data-Char.html#t:Char" title="Data.Char">Char</a>]</li><li class="src short"><a href="#v:_Kircher">_Kircher</a> :: [<a href="../base-4.12.0.0/Data-Char.html#t:Char" title="Data.Char">Char</a>]</li><li class="src short"><a href="#v:_projectDesc">_projectDesc</a> :: [<a href="../base-4.12.0.0/Data-Char.html#t:Char" title="Data.Char">Char</a>]</li><li class="src short"><a href="#v:midiInstrumentNum">midiInstrumentNum</a> :: <a href="../base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></li><li class="src short"><a href="#v:_midiInstrument">_midiInstrument</a> :: <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></li><li class="src short"><a href="#v:meiDocument">meiDocument</a> :: <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Write XML </h1></a><a href="#g:2" id="g:2"><h2>Utilities</h2></a><div class="top"><p class="src"><a id="v:enbrace" class="def">enbrace</a> <a href="src/Scribo.MEI.html#enbrace" class="link">Source</a> <a href="#v:enbrace" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></td><td class="doc"><p>start</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></td><td class="doc"><p>end</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></td><td class="doc"><p>contents to go in between</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Put a string between two other strings</p></div></div><div class="top"><p class="src"><a id="v:xmltagOpen" class="def">xmltagOpen</a> <a href="src/Scribo.MEI.html#xmltagOpen" class="link">Source</a> <a href="#v:xmltagOpen" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></td><td class="doc"><p>text of tag</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Create an XML opening tag, e.g., <code><a href="p">p</a></code></p></div></div><div class="top"><p class="src"><a id="v:xmltagClose" class="def">xmltagClose</a> <a href="src/Scribo.MEI.html#xmltagClose" class="link">Source</a> <a href="#v:xmltagClose" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></td><td class="doc"><p>text of tag</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Create an XML closing tag, e.g., <code><a href="/p">/p</a></code></p></div></div><div class="top"><p class="src"><a id="v:xmlWrap" class="def">xmlWrap</a> <a href="src/Scribo.MEI.html#xmlWrap" class="link">Source</a> <a href="#v:xmlWrap" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></td><td class="doc"><p>opening tag text</p></td></tr><tr><td class="src">-&gt; [<a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a>]</td><td class="doc"><p>list of contents</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></td><td class="doc"><p>closing tag text</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Put something between opening and closing XML tags, specifying text of
 opening tag, contents, and closing tag:
 &gt; xmlWrap &quot;p&quot; &quot;text&quot; &quot;p&quot; =&gt; <a href="p">p</a>text<a href="/p">/p</a></p></div></div><div class="top"><p class="src"><a id="v:xmlWrapBasic" class="def">xmlWrapBasic</a> <a href="src/Scribo.MEI.html#xmlWrapBasic" class="link">Source</a> <a href="#v:xmlWrapBasic" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></td><td class="doc"><p>open and closing tag text</p></td></tr><tr><td class="src">-&gt; [<a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a>]</td><td class="doc"><p>list of contents</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Put something between XML tags, with the same text for opening and
 closing: 
 &gt; xmlWrapBasic &quot;p&quot; &quot;text&quot; =&gt; <a href="p">p</a>text<a href="/p">/p</a></p></div></div><a href="#g:3" id="g:3"><h2>Create elements and attributes, and elements with attributes</h2></a><div class="top"><p class="src"><a id="v:element" class="def">element</a> <a href="src/Scribo.MEI.html#element" class="link">Source</a> <a href="#v:element" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></td><td class="doc"><p>name</p></td></tr><tr><td class="src">-&gt; [<a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a>]</td><td class="doc"><p>values (list of contents, including other elements)</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Create an XML element (which may contain other elements).
 If you need attributes, use <code><a href="Scribo-MEI.html#v:elementAttr" title="Scribo.MEI">elementAttr</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:attr" class="def">attr</a> <a href="src/Scribo.MEI.html#attr" class="link">Source</a> <a href="#v:attr" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></td><td class="doc"><p>name</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></td><td class="doc"><p>single value</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Create an XML attribute</p></div></div><div class="top"><p class="src"><a id="v:elementAttr" class="def">elementAttr</a> <a href="src/Scribo.MEI.html#elementAttr" class="link">Source</a> <a href="#v:elementAttr" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></td><td class="doc"><p>name</p></td></tr><tr><td class="src">-&gt; [<a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a>]</td><td class="doc"><p>list of attributes created with <code><a href="Scribo-MEI.html#v:attr" title="Scribo.MEI">attr</a></code></p></td></tr><tr><td class="src">-&gt; [<a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a>]</td><td class="doc"><p>values (list of contents, including other elements)</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Create an XML element that has attributes, e.g., <code><a href="p">class=&quot;foo&quot;</a>bar<a href="/p">/p</a></code></p></div></div><a href="#g:4" id="g:4"><h1>Serialize our data structures to MEI</h1></a><a href="#g:5" id="g:5"><h2><code>Note</code> becomes <code>note</code> (pitch with syllable, or rest)</h2></a><div class="top"><p class="src"><a id="v:note2mei" class="def">note2mei</a> :: <a href="Cogito-Musarithmetic.html#t:Note" title="Cogito.Musarithmetic">Note</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="src/Scribo.MEI.html#note2mei" class="link">Source</a> <a href="#v:note2mei" class="selflink">#</a></p><div class="doc"><p>Create an MEI <code>note</code> element from our <code>Note</code> datatype, converting the
 attributes as needed. If the <code>Note</code> actually contains a rest (<code><a href="Aedifico.html#t:Pitch" title="Aedifico">Pitch</a></code> with
 only a <code><a href="Aedifico.html#t:Dur" title="Aedifico">Dur</a></code> in the rest range), then produce a <code>rest</code> element.</p></div></div><a href="#g:6" id="g:6"><h3>Conversions for <code>Note</code> members</h3></a><div class="top"><p class="src"><a id="v:meiPname" class="def">meiPname</a> :: <a href="Aedifico.html#t:Pitch" title="Aedifico">Pitch</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="src/Scribo.MEI.html#meiPname" class="link">Source</a> <a href="#v:meiPname" class="selflink">#</a></p><div class="doc"><p>Convert <code><a href="Aedifico.html#t:Pnum" title="Aedifico">Pnum</a></code> to MEI <code>pname</code></p></div></div><div class="top"><p class="src"><a id="v:meiOct" class="def">meiOct</a> :: <a href="Aedifico.html#t:Pitch" title="Aedifico">Pitch</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="src/Scribo.MEI.html#meiOct" class="link">Source</a> <a href="#v:meiOct" class="selflink">#</a></p><div class="doc"><p>Just print the octave number</p></div></div><div class="top"><p class="src"><a id="v:meiDur" class="def">meiDur</a> :: <a href="Aedifico.html#t:Pitch" title="Aedifico">Pitch</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="src/Scribo.MEI.html#meiDur" class="link">Source</a> <a href="#v:meiDur" class="selflink">#</a></p><div class="doc"><p>Convert <code><a href="Aedifico.html#t:Dur" title="Aedifico">Dur</a></code> to MEI <code>dur</code> (base value of duration) and @dots (if any;
 omit if not)</p></div></div><div class="top"><p class="src"><a id="v:meiAccid" class="def">meiAccid</a> :: <a href="Aedifico.html#t:Pitch" title="Aedifico">Pitch</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="src/Scribo.MEI.html#meiAccid" class="link">Source</a> <a href="#v:meiAccid" class="selflink">#</a></p><div class="doc"><p>Convert our <code><a href="Aedifico.html#t:Accid" title="Aedifico">Accid</a></code> to MEI <code>accid</code> (omit if natural)</p><p><strong>TODO</strong> Verovio will display the accidental if the <code>accid</code> attribute or
 element is present, regardless of the key signature. We would need to check
 the tone/key and then use accid.ges for accidentals that are in the key
 signature.</p></div></div><a href="#g:7" id="g:7"><h3>Conversions for lyrics</h3></a><div class="top"><p class="src"><a id="v:meiSyllable" class="def">meiSyllable</a> :: <a href="Cogito-Musarithmetic.html#t:Syllable" title="Cogito.Musarithmetic">Syllable</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="src/Scribo.MEI.html#meiSyllable" class="link">Source</a> <a href="#v:meiSyllable" class="selflink">#</a></p><div class="doc"><p>If a word is a single syllable, we do not need to include <code>@con</code> or
 <code>@wordpos</code>; if it is more than one syllable, we include these attributes.
 We use a dash connector by default, and get the word position from the data
 in the <code><a href="Cogito-Musarithmetic.html#t:Syllable" title="Cogito.Musarithmetic">Syllable</a></code> type.</p></div></div><a href="#g:8" id="g:8"><h1>Write large groups to MEI</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:ListPosition" class="def">ListPosition</a> <a href="src/Scribo.MEI.html#ListPosition" class="link">Source</a> <a href="#t:ListPosition" class="selflink">#</a></p><div class="doc"><p>Where is this item in the list that contains it?</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:ListHead" class="def">ListHead</a></td><td class="doc"><p>head of list</p></td></tr><tr><td class="src"><a id="v:ListBody" class="def">ListBody</a></td><td class="doc"><p>neither head nor last</p></td></tr><tr><td class="src"><a id="v:ListEnd" class="def">ListEnd</a></td><td class="doc"><p>last item in list</p></td></tr><tr><td class="src"><a id="v:ListOnly" class="def">ListOnly</a></td><td class="doc"><p>only item of a one-item list</p></td></tr></table></div><div class="subs instances"><details id="i:ListPosition" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ListPosition:Enum:1"></span> <a href="../base-4.12.0.0/Prelude.html#t:Enum" title="Prelude">Enum</a> <a href="Scribo-MEI.html#t:ListPosition" title="Scribo.MEI">ListPosition</a></span> <a href="src/Scribo.MEI.html#line-225" class="link">Source</a> <a href="#t:ListPosition" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:ListPosition:Enum:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Scribo-MEI.html">Scribo.MEI</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:succ">succ</a> :: <a href="Scribo-MEI.html#t:ListPosition" title="Scribo.MEI">ListPosition</a> -&gt; <a href="Scribo-MEI.html#t:ListPosition" title="Scribo.MEI">ListPosition</a> <a href="#v:succ" class="selflink">#</a></p><p class="src"><a href="#v:pred">pred</a> :: <a href="Scribo-MEI.html#t:ListPosition" title="Scribo.MEI">ListPosition</a> -&gt; <a href="Scribo-MEI.html#t:ListPosition" title="Scribo.MEI">ListPosition</a> <a href="#v:pred" class="selflink">#</a></p><p class="src"><a href="#v:toEnum">toEnum</a> :: <a href="../base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Scribo-MEI.html#t:ListPosition" title="Scribo.MEI">ListPosition</a> <a href="#v:toEnum" class="selflink">#</a></p><p class="src"><a href="#v:fromEnum">fromEnum</a> :: <a href="Scribo-MEI.html#t:ListPosition" title="Scribo.MEI">ListPosition</a> -&gt; <a href="../base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a> <a href="#v:fromEnum" class="selflink">#</a></p><p class="src"><a href="#v:enumFrom">enumFrom</a> :: <a href="Scribo-MEI.html#t:ListPosition" title="Scribo.MEI">ListPosition</a> -&gt; [<a href="Scribo-MEI.html#t:ListPosition" title="Scribo.MEI">ListPosition</a>] <a href="#v:enumFrom" class="selflink">#</a></p><p class="src"><a href="#v:enumFromThen">enumFromThen</a> :: <a href="Scribo-MEI.html#t:ListPosition" title="Scribo.MEI">ListPosition</a> -&gt; <a href="Scribo-MEI.html#t:ListPosition" title="Scribo.MEI">ListPosition</a> -&gt; [<a href="Scribo-MEI.html#t:ListPosition" title="Scribo.MEI">ListPosition</a>] <a href="#v:enumFromThen" class="selflink">#</a></p><p class="src"><a href="#v:enumFromTo">enumFromTo</a> :: <a href="Scribo-MEI.html#t:ListPosition" title="Scribo.MEI">ListPosition</a> -&gt; <a href="Scribo-MEI.html#t:ListPosition" title="Scribo.MEI">ListPosition</a> -&gt; [<a href="Scribo-MEI.html#t:ListPosition" title="Scribo.MEI">ListPosition</a>] <a href="#v:enumFromTo" class="selflink">#</a></p><p class="src"><a href="#v:enumFromThenTo">enumFromThenTo</a> :: <a href="Scribo-MEI.html#t:ListPosition" title="Scribo.MEI">ListPosition</a> -&gt; <a href="Scribo-MEI.html#t:ListPosition" title="Scribo.MEI">ListPosition</a> -&gt; <a href="Scribo-MEI.html#t:ListPosition" title="Scribo.MEI">ListPosition</a> -&gt; [<a href="Scribo-MEI.html#t:ListPosition" title="Scribo.MEI">ListPosition</a>] <a href="#v:enumFromThenTo" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ListPosition:Eq:2"></span> <a href="../base-4.12.0.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> <a href="Scribo-MEI.html#t:ListPosition" title="Scribo.MEI">ListPosition</a></span> <a href="src/Scribo.MEI.html#line-225" class="link">Source</a> <a href="#t:ListPosition" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:ListPosition:Eq:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Scribo-MEI.html">Scribo.MEI</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Scribo-MEI.html#t:ListPosition" title="Scribo.MEI">ListPosition</a> -&gt; <a href="Scribo-MEI.html#t:ListPosition" title="Scribo.MEI">ListPosition</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Scribo-MEI.html#t:ListPosition" title="Scribo.MEI">ListPosition</a> -&gt; <a href="Scribo-MEI.html#t:ListPosition" title="Scribo.MEI">ListPosition</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ListPosition:Show:3"></span> <a href="../base-4.12.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> <a href="Scribo-MEI.html#t:ListPosition" title="Scribo.MEI">ListPosition</a></span> <a href="src/Scribo.MEI.html#line-225" class="link">Source</a> <a href="#t:ListPosition" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:ListPosition:Show:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Scribo-MEI.html">Scribo.MEI</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Scribo-MEI.html#t:ListPosition" title="Scribo.MEI">ListPosition</a> -&gt; <a href="../base-4.12.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Scribo-MEI.html#t:ListPosition" title="Scribo.MEI">ListPosition</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Scribo-MEI.html#t:ListPosition" title="Scribo.MEI">ListPosition</a>] -&gt; <a href="../base-4.12.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:positionMap" class="def">positionMap</a> :: ((<a href="Scribo-MEI.html#t:ListPosition" title="Scribo.MEI">ListPosition</a>, a1) -&gt; [a2]) -&gt; [a1] -&gt; [a2] <a href="src/Scribo.MEI.html#positionMap" class="link">Source</a> <a href="#v:positionMap" class="selflink">#</a></p><div class="doc"><p>Given a function that takes a ListPosition argument and a list, apply the
 function to the list. This allows you to treat the first and last items in
 the list differently.</p></div></div><div class="top"><p class="src"><a id="v:markedEnds" class="def">markedEnds</a> :: [a] -&gt; [(<a href="Scribo-MEI.html#t:ListPosition" title="Scribo.MEI">ListPosition</a>, a)] <a href="src/Scribo.MEI.html#markedEnds" class="link">Source</a> <a href="#v:markedEnds" class="selflink">#</a></p><div class="doc"><p>Mark a list with the positions of the items: first, body, and last.
 Output a list of pairs with the <code><a href="Scribo-MEI.html#t:ListPosition" title="Scribo.MEI">ListPosition</a></code> and the original list item.</p></div></div><div class="top"><p class="src"><a id="v:phrase2mei" class="def">phrase2mei</a> :: (<a href="Scribo-MEI.html#t:ListPosition" title="Scribo.MEI">ListPosition</a>, <a href="Cogito-Musarithmetic.html#t:MusicPhrase" title="Cogito.Musarithmetic">MusicPhrase</a>) -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="src/Scribo.MEI.html#phrase2mei" class="link">Source</a> <a href="#v:phrase2mei" class="selflink">#</a></p><div class="doc"><p>Make an XML string containing a list of <code>note</code> elements out of a
 <code><a href="Cogito-Musarithmetic.html#t:MusicPhrase" title="Cogito.Musarithmetic">MusicPhrase</a></code>; end each phrase with <code>barline</code>, except for last in the list.</p><p>Leave the barline of the last phrase up to the next-higher function (end of
 sentence gets regular bar; end of sentence, double bar; end of
 section, final bar).</p></div></div><div class="top"><p class="src"><a id="v:sentence2mei" class="def">sentence2mei</a> :: (<a href="Scribo-MEI.html#t:ListPosition" title="Scribo.MEI">ListPosition</a>, <a href="Cogito-Musarithmetic.html#t:MusicSentence" title="Cogito.Musarithmetic">MusicSentence</a>) -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="src/Scribo.MEI.html#sentence2mei" class="link">Source</a> <a href="#v:sentence2mei" class="selflink">#</a></p><div class="doc"><p>Make an XML string containing all the contents of one <code>layer</code> out of a
 <code><a href="Cogito-Musarithmetic.html#t:MusicSentence" title="Cogito.Musarithmetic">MusicSentence</a></code>.
 If this is the last sentence in the section, omit the bar so the higher
 function calling this one can add it.
 Sentence ends with regular barline.</p></div></div><div class="top"><p class="src"><a id="v:section2mei" class="def">section2mei</a> :: <a href="Aedifico.html#t:Arca" title="Aedifico">Arca</a> -&gt; (<a href="Scribo-MEI.html#t:ListPosition" title="Scribo.MEI">ListPosition</a>, <a href="Cogito-Musarithmetic.html#t:MusicSection" title="Cogito.Musarithmetic">MusicSection</a>) -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="src/Scribo.MEI.html#section2mei" class="link">Source</a> <a href="#v:section2mei" class="selflink">#</a></p><div class="doc"><p>A <code><a href="Cogito-Musarithmetic.html#t:MusicSection" title="Cogito.Musarithmetic">MusicSection</a></code> contains all the music for one section, /for a single
 voice/: so combine all subdivisions into one <code>staff</code> and <code>layer</code> so this
 can be made part of an MEI <code>section</code> in <code><a href="Scribo-MEI.html#v:chorus2mei" title="Scribo.MEI">chorus2mei</a></code>.  
 Include MEI 1-indexed staff number derived from <code><a href="Aedifico.html#t:VoiceName" title="Aedifico">VoiceName</a></code> enum 
 Put a double bar at the end of sections and a final bar at the end of the
 piece.</p><p><strong>TODO</strong>: you could put more than one layer per staff if you wanted a
 2-staff choirstaff (e.g., SA on one, TB on the other)</p></div></div><div class="top"><p class="src"><a id="v:chorus2mei" class="def">chorus2mei</a> :: <a href="Aedifico.html#t:Arca" title="Aedifico">Arca</a> -&gt; (<a href="Scribo-MEI.html#t:ListPosition" title="Scribo.MEI">ListPosition</a>, <a href="Cogito-Musarithmetic.html#t:MusicChorus" title="Cogito.Musarithmetic">MusicChorus</a>) -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="src/Scribo.MEI.html#chorus2mei" class="link">Source</a> <a href="#v:chorus2mei" class="selflink">#</a></p><div class="doc"><p>Take a list of sections, one per SATB voice, and create a single MEI
 <code>section</code> including all the voices.
 Add a final bar at the end.</p></div></div><div class="top"><p class="src"><a id="v:meiKey" class="def">meiKey</a> :: <a href="Aedifico.html#t:Tone" title="Aedifico">Tone</a> -&gt; <a href="Aedifico.html#t:ToneSystem" title="Aedifico">ToneSystem</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="src/Scribo.MEI.html#meiKey" class="link">Source</a> <a href="#v:meiKey" class="selflink">#</a></p><div class="doc"><p>Create an MEI key signature (all naturals or one flat) based on tone
 (<code>key.sig</code> attribute for use in <code>scoreDef</code>/<code>staffDef</code>)</p></div></div><div class="top"><p class="src"><a id="v:meiKeyAttr" class="def">meiKeyAttr</a> :: <a href="Aedifico.html#t:Tone" title="Aedifico">Tone</a> -&gt; <a href="Aedifico.html#t:ToneSystem" title="Aedifico">ToneSystem</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="src/Scribo.MEI.html#meiKeyAttr" class="link">Source</a> <a href="#v:meiKeyAttr" class="selflink">#</a></p><div class="doc"><p>MEI key signature as an attribute (for use in <code>staffDef</code>)</p></div></div><div class="top"><p class="src"><a id="v:meiKeySigString" class="def">meiKeySigString</a> :: <a href="Aedifico.html#t:Tone" title="Aedifico">Tone</a> -&gt; <a href="Aedifico.html#t:ToneSystem" title="Aedifico">ToneSystem</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="src/Scribo.MEI.html#meiKeySigString" class="link">Source</a> <a href="#v:meiKeySigString" class="selflink">#</a></p><div class="doc"><p>Value for MEI <code>key.sig</code>: one flat if tone is <em>mollis</em>, no signature
 otherwise</p></div></div><div class="top"><p class="src"><a id="v:meiMeter" class="def">meiMeter</a> :: <a href="Aedifico.html#t:MusicMeter" title="Aedifico">MusicMeter</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="src/Scribo.MEI.html#meiMeter" class="link">Source</a> <a href="#v:meiMeter" class="selflink">#</a></p><div class="doc"><p>Switch to select which kind of meter to use as an element</p></div></div><div class="top"><p class="src"><a id="v:meiMeterAttr" class="def">meiMeterAttr</a> :: <a href="Aedifico.html#t:MusicMeter" title="Aedifico">MusicMeter</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="src/Scribo.MEI.html#meiMeterAttr" class="link">Source</a> <a href="#v:meiMeterAttr" class="selflink">#</a></p><div class="doc"><p>Switch to select which kind of meter to use as an attribute</p></div></div><div class="top"><p class="src"><a id="v:meiMeterModern" class="def">meiMeterModern</a> :: <a href="Aedifico.html#t:MusicMeter" title="Aedifico">MusicMeter</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="src/Scribo.MEI.html#meiMeterModern" class="link">Source</a> <a href="#v:meiMeterModern" class="selflink">#</a></p><div class="doc"><p>Create an MEI meter signature (using modern equivalents of Kircher's C,
 C3, cutC3).
 (<code>meterSig with </code>meter.count<code> and </code>meter.unit<code> attributes for use in
 </code>scoreDef<code>/</code>staffDef@) </p></div></div><div class="top"><p class="src"><a id="v:meiMeterMensural" class="def">meiMeterMensural</a> :: <a href="Aedifico.html#t:MusicMeter" title="Aedifico">MusicMeter</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="src/Scribo.MEI.html#meiMeterMensural" class="link">Source</a> <a href="#v:meiMeterMensural" class="selflink">#</a></p><div class="doc"><p>Mensural version of <code><a href="Scribo-MEI.html#v:meiMeter" title="Scribo.MEI">meiMeter</a></code>. We want either &quot;cut C&quot;, <a href="C3.html">C3</a>, or &quot;cutC3&quot;.
 Verovio does not render these correctly as of 2021/07 when using the
 <code>proport</code> element (or <code>proport.num</code> attribute) for the number, which is the
 correct encoding. But putting <code>num</code> directly inside <code>mensur</code> works with
 Verovio.</p></div></div><div class="top"><p class="src"><a id="v:meiMeterMensuralAttr" class="def">meiMeterMensuralAttr</a> :: <a href="Aedifico.html#t:MusicMeter" title="Aedifico">MusicMeter</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="src/Scribo.MEI.html#meiMeterMensuralAttr" class="link">Source</a> <a href="#v:meiMeterMensuralAttr" class="selflink">#</a></p><div class="doc"><p>Mensural meter with proportion as a string of attributes (for use in
 <code>staffDef</code>, where the correct encoding also works with Verovio).</p></div></div><div class="top"><p class="src"><a id="v:meiMidiTempo" class="def">meiMidiTempo</a> :: <a href="Aedifico.html#t:MusicMeter" title="Aedifico">MusicMeter</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="src/Scribo.MEI.html#meiMidiTempo" class="link">Source</a> <a href="#v:meiMidiTempo" class="selflink">#</a></p><div class="doc"><p>MEI <code>tempo</code> element for MIDI speed: quarter-note (semiminim) beats per
 minute, different tempi for each mensuration</p></div></div><div class="top"><p class="src"><a id="v:meiMidiBPM" class="def">meiMidiBPM</a> :: <a href="Aedifico.html#t:MusicMeter" title="Aedifico">MusicMeter</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="src/Scribo.MEI.html#meiMidiBPM" class="link">Source</a> <a href="#v:meiMidiBPM" class="selflink">#</a></p><div class="doc"><p>MEI <code>midi.bpm</code> attribute appropriate for each mensuration
 This is how it should work, but Verovio does not accept a tempo element
 within staff, so I do not know how to do a tempo change mid-piece. </p></div></div><div class="top"><p class="src"><a id="v:chorus2list" class="def">chorus2list</a> :: <a href="Cogito-Musarithmetic.html#t:MusicChorus" title="Cogito.Musarithmetic">MusicChorus</a> -&gt; [<a href="Cogito-Musarithmetic.html#t:MusicSection" title="Cogito.Musarithmetic">MusicSection</a>] <a href="src/Scribo.MEI.html#chorus2list" class="link">Source</a> <a href="#v:chorus2list" class="selflink">#</a></p><div class="doc"><p>Extract a simple list of <code><a href="Cogito-Musarithmetic.html#t:MusicSentence" title="Cogito.Musarithmetic">MusicSentence</a></code> from the four members of a
 <code><a href="Cogito-Musarithmetic.html#t:MusicChorus" title="Cogito.Musarithmetic">MusicChorus</a></code></p></div></div><a href="#g:9" id="g:9"><h1>Write a whole score to MEI</h1></a><div class="top"><p class="src"><a id="v:score2mei" class="def">score2mei</a> :: <a href="Aedifico.html#t:Arca" title="Aedifico">Arca</a> -&gt; <a href="Lectio.html#t:ArkMetadata" title="Lectio">ArkMetadata</a> -&gt; <a href="Cogito-Musarithmetic.html#t:MusicScore" title="Cogito.Musarithmetic">MusicScore</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="src/Scribo.MEI.html#score2mei" class="link">Source</a> <a href="#v:score2mei" class="selflink">#</a></p><div class="doc"><p>Convert a whole <code><a href="Cogito-Musarithmetic.html#t:MusicScore" title="Cogito.Musarithmetic">MusicScore</a></code> to MEI XML.
 Include meter and key of first section in top-level <code>scoreDef</code> (<strong>TODO</strong> ?)
 Pass on the position in the list to the next function down.</p></div></div><a href="#g:10" id="g:10"><h2>The full MEI document</h2></a><a href="#g:11" id="g:11"><h3>MEI Barlines</h3></a><div class="top"><p class="src"><a id="v:meiDoubleBar" class="def">meiDoubleBar</a> :: <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="src/Scribo.MEI.html#meiDoubleBar" class="link">Source</a> <a href="#v:meiDoubleBar" class="selflink">#</a></p><div class="doc"><p>Make an MEI double barline</p></div></div><div class="top"><p class="src"><a id="v:meiFinalBar" class="def">meiFinalBar</a> :: <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="src/Scribo.MEI.html#meiFinalBar" class="link">Source</a> <a href="#v:meiFinalBar" class="selflink">#</a></p><div class="doc"><p>Make an MEI final barline</p></div></div><div class="top"><p class="src"><a id="v:meiBarline" class="def">meiBarline</a> <a href="src/Scribo.MEI.html#meiBarline" class="link">Source</a> <a href="#v:meiBarline" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></td><td class="doc"><p>form string (&quot;dbl&quot;, &quot;end&quot;, or &quot;&quot; for regular barline)</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Make an MEI <code>barLine</code> element</p></div></div><a href="#g:12" id="g:12"><h3>String constants for XML document</h3></a><div class="top"><p class="src"><a id="v:_xmlHeader" class="def">_xmlHeader</a> :: [<a href="../base-4.12.0.0/Data-Char.html#t:Char" title="Data.Char">Char</a>] <a href="src/Scribo.MEI.html#_xmlHeader" class="link">Source</a> <a href="#v:_xmlHeader" class="selflink">#</a></p><div class="doc"><p>Default XML header</p></div></div><div class="top"><p class="src"><a id="v:_meiVersion" class="def">_meiVersion</a> :: [<a href="../base-4.12.0.0/Data-Char.html#t:Char" title="Data.Char">Char</a>] <a href="src/Scribo.MEI.html#_meiVersion" class="link">Source</a> <a href="#v:_meiVersion" class="selflink">#</a></p><div class="doc"><p>MEI version number</p></div></div><div class="top"><p class="src"><a id="v:_whoami" class="def">_whoami</a> :: [<a href="../base-4.12.0.0/Data-Char.html#t:Char" title="Data.Char">Char</a>] <a href="src/Scribo.MEI.html#_whoami" class="link">Source</a> <a href="#v:_whoami" class="selflink">#</a></p><div class="doc"><p>The &quot;composer&quot; (that is, the ark itself)</p></div></div><div class="top"><p class="src"><a id="v:_Kircher" class="def">_Kircher</a> :: [<a href="../base-4.12.0.0/Data-Char.html#t:Char" title="Data.Char">Char</a>] <a href="src/Scribo.MEI.html#_Kircher" class="link">Source</a> <a href="#v:_Kircher" class="selflink">#</a></p><div class="doc"><p>The &quot;inventor&quot;</p></div></div><div class="top"><p class="src"><a id="v:_projectDesc" class="def">_projectDesc</a> :: [<a href="../base-4.12.0.0/Data-Char.html#t:Char" title="Data.Char">Char</a>] <a href="src/Scribo.MEI.html#_projectDesc" class="link">Source</a> <a href="#v:_projectDesc" class="selflink">#</a></p><div class="doc"><p>MEI project description text</p></div></div><div class="top"><p class="src"><a id="v:midiInstrumentNum" class="def">midiInstrumentNum</a> <a href="src/Scribo.MEI.html#midiInstrumentNum" class="link">Source</a> <a href="#v:midiInstrumentNum" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="../base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a></td><td class="doc"><p>1-indexed MIDI instrument number (e.g., 19 = Church Organ)</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></td><td class="doc"><p>MEI <code>instrDef</code> element</p></td></tr></table></div><div class="doc"><p>MEI element for MIDI instrument number (1-indexed)</p></div></div><div class="top"><p class="src"><a id="v:_midiInstrument" class="def">_midiInstrument</a> :: <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="src/Scribo.MEI.html#_midiInstrument" class="link">Source</a> <a href="#v:_midiInstrument" class="selflink">#</a></p><div class="doc"><p>MIDI instrument for playback </p></div></div><a href="#g:13" id="g:13"><h3>The template</h3></a><div class="top"><p class="src"><a id="v:meiDocument" class="def">meiDocument</a> <a href="src/Scribo.MEI.html#meiDocument" class="link">Source</a> <a href="#v:meiDocument" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></td><td class="doc"><p>title </p></td></tr><tr><td class="src">-&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></td><td class="doc"><p>poet/author of words</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></td><td class="doc"><p>XML string with <code>keySig</code> element</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></td><td class="doc"><p>XML string with <code>mensur</code> element (and <code>proport</code> if present)</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></td><td class="doc"><p>XML string with <code>midi.bpm</code> attribute</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></td><td class="doc"><p>XML string representing the <code>section</code> elements</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Plug in variables and musical content needed to boilerplate MEI document
 in all its baroque verbosity</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.22.0</p></div></body></html>