<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Scribo.Lilypond</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Scribo.Lilypond.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">arca-0.1.0.0</p></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>(c) Andrew A. Cashner 2020</td></tr><tr><th>Maintainer</th><td>Andrew Cashner, &lt;andrew.cashner@rochester.edu&gt;</td></tr><tr><th>Stability</th><td>Experimental</td></tr><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Scribo.Lilypond</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Write individual data types to Lilypond strings</a></li><li><a href="#g:2">Write larger structures of music data to Lilypond, with necessary framing</a></li><li><a href="#g:3">All together now</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>This module is our implementation of Kircher's <em>palimpsest phonotacticum</em>, his
system for writing out the music created using the ark.  Certain elements that
Kircher used notation to calculate (like determining vocal ranges by clef
combinations and the size of the staff) we actually do in the <code>Cogito</code> module.
This module is purely focused on output of complete music information to a
music-notation language.</p><p>This module outputs to Lilypond, which could then be processed by that program
to PDF, MIDI, or other formats. </p><p>This module also contains the central <code><a href="Scribo-Lilypond.html#v:compose" title="Scribo.Lilypond">compose</a></code> function that takes in a text
processed by the <code>Lectio</code> module, and does the rest of the work of getting
data from the ark, adjusting and translating that data into music (using
<code>Cogito</code>), and then writing it.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:pitch2ly">pitch2ly</a> :: <a href="Aedifico.html#t:Pitch" title="Aedifico">Pitch</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></li><li class="src short"><a href="#v:enbrace">enbrace</a> :: <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></li><li class="src short"><a href="#v:lyMusicGroup">lyMusicGroup</a> :: <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></li><li class="src short"><a href="#v:lySimultaneousGroup">lySimultaneousGroup</a> :: <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></li><li class="src short"><a href="#v:voice2ly">voice2ly</a> :: <a href="Cogito.html#t:Voice" title="Cogito">Voice</a> -&gt; <a href="Aedifico.html#t:ModeSystem" title="Aedifico">ModeSystem</a> -&gt; <a href="Lectio.html#t:LyricSection" title="Lectio">LyricSection</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></li><li class="src short"><a href="#v:lyrics2ly">lyrics2ly</a> :: <a href="Lectio.html#t:LyricSection" title="Lectio">LyricSection</a> -&gt; <a href="Cogito.html#t:Voice" title="Cogito">Voice</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></li><li class="src short"><a href="#v:voice2lyOpening">voice2lyOpening</a> :: <a href="Cogito.html#t:Voice" title="Cogito">Voice</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></li><li class="src short"><a href="#v:voice2lyClosing">voice2lyClosing</a> :: <a href="Cogito.html#t:Voice" title="Cogito">Voice</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></li><li class="src short"><a href="#v:voiceClosing">voiceClosing</a> :: <a href="Cogito.html#t:Voice" title="Cogito">Voice</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></li><li class="src short"><a href="#v:masterMusic2ly">masterMusic2ly</a> :: <a href="Aedifico.html#t:Arca" title="Aedifico">Arca</a> -&gt; [<a href="Cogito.html#t:Symphonia" title="Cogito">Symphonia</a>] -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></li><li class="src short"><a href="#v:makePreamble">makePreamble</a> :: [<a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a>] -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></li><li class="src short"><a href="#v:makeHeader">makeHeader</a> :: <a href="Lectio.html#t:ArkMetadata" title="Lectio">ArkMetadata</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></li><li class="src short"><a href="#v:compose">compose</a> :: <a href="Aedifico.html#t:Arca" title="Aedifico">Arca</a> -&gt; <a href="Lectio.html#t:ArkMetadata" title="Lectio">ArkMetadata</a> -&gt; [<a href="Lectio.html#t:LyricSection" title="Lectio">LyricSection</a>] -&gt; [<a href="Fortuna.html#t:SectionPerm" title="Fortuna">SectionPerm</a>] -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Write individual data types to Lilypond strings</h1></a><div class="top"><p class="src"><a id="v:pitch2ly" class="def">pitch2ly</a> :: <a href="Aedifico.html#t:Pitch" title="Aedifico">Pitch</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="src/Scribo.Lilypond.html#pitch2ly" class="link">Source</a> <a href="#v:pitch2ly" class="selflink">#</a></p><div class="doc"><p>Write pitch as Lilypond music note.
 Look up needed string values for letter name, accidental, octave tick marks,
 and duration in lists based on data in given <code><a href="Aedifico.html#t:Pitch" title="Aedifico">Pitch</a></code>.
 If it is a <code><a href="Aedifico-Pnum.html#v:Rest" title="Aedifico.Pnum">Rest</a></code>, just print the rest rhythm string.</p><p>Most of these just require using an enum value as index to a list of
 strings or characters. The octave requires us to calculate the number of
 commas or apostrophes to add (relative to Helmholtz octave 3 = <code>c</code>).</p></div></div><a href="#g:2" id="g:2"><h1>Write larger structures of music data to Lilypond, with necessary framing</h1></a><div class="top"><p class="src"><a id="v:enbrace" class="def">enbrace</a> <a href="src/Scribo.Lilypond.html#enbrace" class="link">Source</a> <a href="#v:enbrace" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></td><td class="doc"><p>string to put between enclosures</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></td><td class="doc"><p>opening enclosure text (e.g., <code>{</code>)</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></td><td class="doc"><p>closing text (e.g., <code>}</code>)</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Put things inside enclosing parens, brackets, etc.</p></div></div><div class="top"><p class="src"><a id="v:lyMusicGroup" class="def">lyMusicGroup</a> :: <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="src/Scribo.Lilypond.html#lyMusicGroup" class="link">Source</a> <a href="#v:lyMusicGroup" class="selflink">#</a></p><div class="doc"><p>Group string in curly braces <code>{string}</code> with added newlines</p></div></div><div class="top"><p class="src"><a id="v:lySimultaneousGroup" class="def">lySimultaneousGroup</a> :: <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="src/Scribo.Lilypond.html#lySimultaneousGroup" class="link">Source</a> <a href="#v:lySimultaneousGroup" class="selflink">#</a></p><div class="doc"><p>Group string in double angle brackets <code>&lt;&lt;string&gt;&gt;</code> with added newlines</p></div></div><div class="top"><p class="src"><a id="v:voice2ly" class="def">voice2ly</a> :: <a href="Cogito.html#t:Voice" title="Cogito">Voice</a> -&gt; <a href="Aedifico.html#t:ModeSystem" title="Aedifico">ModeSystem</a> -&gt; <a href="Lectio.html#t:LyricSection" title="Lectio">LyricSection</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="src/Scribo.Lilypond.html#voice2ly" class="link">Source</a> <a href="#v:voice2ly" class="selflink">#</a></p><div class="doc"><p>Write a <code><a href="Cogito.html#t:Voice" title="Cogito">Voice</a></code> to a Lilypond music group:</p><pre>\new Staff&lt;&lt; \new Voice { ... } &gt;&gt;</pre><p>We have to include Lilypond <code>midiInstrument</code> here.</p></div></div><div class="top"><p class="src"><a id="v:lyrics2ly" class="def">lyrics2ly</a> :: <a href="Lectio.html#t:LyricSection" title="Lectio">LyricSection</a> -&gt; <a href="Cogito.html#t:Voice" title="Cogito">Voice</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="src/Scribo.Lilypond.html#lyrics2ly" class="link">Source</a> <a href="#v:lyrics2ly" class="selflink">#</a></p><div class="doc"><p>Write a <code><a href="Lectio.html#t:LyricSection" title="Lectio">LyricSection</a></code> to a Lilypond <code>new Lyrics { }</code> statement for a
 particular voice (<code>VoiceName</code>). Separate -- syllables with <code> -- </code>.</p></div></div><div class="top"><p class="src"><a id="v:voice2lyOpening" class="def">voice2lyOpening</a> :: <a href="Cogito.html#t:Voice" title="Cogito">Voice</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="src/Scribo.Lilypond.html#voice2lyOpening" class="link">Source</a> <a href="#v:voice2lyOpening" class="selflink">#</a></p><div class="doc"><p>The opening string per voice</p></div></div><div class="top"><p class="src"><a id="v:voice2lyClosing" class="def">voice2lyClosing</a> :: <a href="Cogito.html#t:Voice" title="Cogito">Voice</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="src/Scribo.Lilypond.html#voice2lyClosing" class="link">Source</a> <a href="#v:voice2lyClosing" class="selflink">#</a></p><div class="doc"><p>The end of the music part of the voice and beginning of the lyrics</p></div></div><div class="top"><p class="src"><a id="v:voiceClosing" class="def">voiceClosing</a> :: <a href="Cogito.html#t:Voice" title="Cogito">Voice</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="src/Scribo.Lilypond.html#voiceClosing" class="link">Source</a> <a href="#v:voiceClosing" class="selflink">#</a></p><div class="doc"><p>The end of the voice and its lyrics (discards input)</p></div></div><div class="top"><p class="src"><a id="v:masterMusic2ly" class="def">masterMusic2ly</a> :: <a href="Aedifico.html#t:Arca" title="Aedifico">Arca</a> -&gt; [<a href="Cogito.html#t:Symphonia" title="Cogito">Symphonia</a>] -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="src/Scribo.Lilypond.html#masterMusic2ly" class="link">Source</a> <a href="#v:masterMusic2ly" class="selflink">#</a></p><div class="doc"><p>Convert all the music derived from input into notation output</p></div></div><div class="top"><p class="src"><a id="v:makePreamble" class="def">makePreamble</a> :: [<a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a>] -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="src/Scribo.Lilypond.html#makePreamble" class="link">Source</a> <a href="#v:makePreamble" class="selflink">#</a></p><div class="doc"><p>Make Lilypond preamble of include commands</p></div></div><div class="top"><p class="src"><a id="v:makeHeader" class="def">makeHeader</a> :: <a href="Lectio.html#t:ArkMetadata" title="Lectio">ArkMetadata</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="src/Scribo.Lilypond.html#makeHeader" class="link">Source</a> <a href="#v:makeHeader" class="selflink">#</a></p><div class="doc"><p>Make Lilypond header with the Arca as the author</p></div></div><a href="#g:3" id="g:3"><h1>All together now</h1></a><div class="top"><p class="src"><a id="v:compose" class="def">compose</a> :: <a href="Aedifico.html#t:Arca" title="Aedifico">Arca</a> -&gt; <a href="Lectio.html#t:ArkMetadata" title="Lectio">ArkMetadata</a> -&gt; [<a href="Lectio.html#t:LyricSection" title="Lectio">LyricSection</a>] -&gt; [<a href="Fortuna.html#t:SectionPerm" title="Fortuna">SectionPerm</a>] -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="src/Scribo.Lilypond.html#compose" class="link">Source</a> <a href="#v:compose" class="selflink">#</a></p><div class="doc"><p>Set a prepared <code><a href="Lectio.html#t:LyricSentence" title="Lectio">LyricSentence</a></code> to music in one go. Return the text of a
 complete Lilypond file as a string. Write version number and preamble, and
 put music into <code>score</code> and <code>StaffGroup</code> (needed because we are doing
 <em>Mensurstriche</em>).</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.22.0</p></div></body></html>