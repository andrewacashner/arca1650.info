<!DOCTYPE HTML>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Arca musarithmica</title>
    <meta name="description" 
          content="Display music generated automatically by Athanasius
                   Kircher’s device for automatic music composition from his
                   Musurgia universalis (Rome, 1650), Book VIII, in Haskell 
                   implementation (2021)">

    <link rel="stylesheet" type="text/css" href="arca.css">
    <link rel="icon" type="image/png" href="img/panpipe.png">

    <script>
      // Bring in MEI data from PHP and check input parameters -->
      var mei = '<?=$mei?>';
      if (mei.length === 0) {
          console.error("Empty MEI output from arca");
      }
      window.meiXML = mei;

      console.log("Setting input text [<?=$inputText?>] in method [<?=$inputType?>]: style [<?=$inputStyle?>], tone [<?=$inputTone?>], meter [<?=$inputMeter?>]...");
      console.log("Loading input file [<?=$infileName?>]...");
      console.log("Rendering MEI output file beginning [%s]...", window.meiXML.substring(0,300));
    </script>

    <script src="verovio/verovio-toolkit-wasm.js" defer></script>
    <script src="verovio/jquery.min.js" defer></script>
    <script src="midi/019_church_organ.js" defer></script>
    <script src="midi/midiplayer.js" defer></script>
    <script src="script/arca-verovio-app.js" defer></script>
  </head>
  <body>
    <header>
      <h1>ARCA MUSARITHMICA</h1>
      <h2>a device for automatic music composition from 1650</h2>
    </header>
      <nav>
        <ul>
          <li><a href="index.html">Home</a></li>
          <li><a href="about.html">About</a></li>
          <li><a href="doc/index.html">Code</a></li>
        </ul>
      </nav>
    <main>
        <section>
            <h1><?=$title?></h1>
            <h2>Composed by the Arca musarithmica</h2>

            <p><a href="compose.html">Compose more music</a> or reload this page to produce a different setting</p>

            <section>
                <noscript>
                Javascript must be enabled in your browser to display the music.
                </noscript>
                <div class="controls">
                    <div class="button-key">
                        <p>Page</p>
                        <p>MIDI audio</p>
                        <p>Zoom</p>
                    </div>
                    <div class="buttons">
                        <div class="page-controls">
                            <button onclick="firstPage();">↞</button>
                            <button onclick="prevPage();">←</button>
                            <button onclick="nextPage();">→</button>
                            <button onclick="lastPage();">↠</button>
                        </div>
                        <div class="playback-controls">
                            <button onclick="midiPlayToggle();">⏯</button>
                        </div>
                        <div class="zoom-controls">
                            <button onclick="zoomOut();">-</button>
                            <button onclick="zoomReset();">↺</button>
                            <button onclick="zoomIn();">+</button>
                        </div>
                    </div>
                </div>
                <div id="player"></div>
                <div class="panel-body">
                    <div id="app" class="panel">Rendering MEI with Verovio...</div>
                </div>
            </section>

        </section>
        <section>
            <ul>
                <li>MEI newly generated from user-selected options and prepared input texts in XML by the <code>arca</code> Haskell program </li>
                <li>MEI rendered into SVG graphics by RISM’s <a href="https://www.verovio.org/">Verovio</a> <a href="https://www.verovio.org/app.html">Javascript app</a></li>
                <li>MIDI generated by Verovio toolkit and played by Verovio midi player, which uses <a href="http://zz85.github.io/wild-web-midi/">Wild Web MIDI</a></li>
                <li>The Verovio software is made freely available under the GNU Lesser General Public License v3.0.</li>
            </ul>
        </section>
    </main>
    <footer>
      <p>Copyright © 2022 
        <a href="https://orcid.org/0000-0002-7468-8579">Andrew A. Cashner</a>. 
        All rights reserved. 
        (Except where other licenses are specified for third-party software.)</p>
    </footer>
</html>
